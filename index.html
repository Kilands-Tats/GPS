<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Localisation</title>
</head>
<body>
    <h1>Partage de localisation...</h1>
    <script>
  function sendLocation(position) {
    let url = "https://script.google.com/macros/s/AKfycbxw3-NM4xxX9YbF5we40n4E9ka_3L1G-z7xpuVUbuOPTanhg3QyNZTy-LQNGe1_z6KI/exec"

    let data = {
        latitude: position.coords.latitude.toFixed(6), // Limite les d√©cimales √† 6
        longitude: position.coords.longitude.toFixed(6),
        timestamp: new Date().toISOString()
    };

    console.log("Donn√©es envoy√©es :", data); // üîç V√©rification console

    fetch(url, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    })
    .then(response => response.text())
    .then(data => {
        console.log("R√©ponse du serveur :", data);
        document.body.innerHTML = "<h2>R√©ponse re√ßue : " + data + "</h2>";
    })
    .catch(error => {
        console.error("Erreur :", error);
        document.body.innerHTML = "<h2>Erreur d'envoi</h2>";
    });
}



        function errorHandler(error) {
            document.body.innerHTML = "<h2>Impossible d'obtenir la localisation.</h2>";
            console.error(error);
        }

        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(sendLocation, errorHandler);
        } else {
            document.body.innerHTML = "<h2>La g√©olocalisation n'est pas support√©e.</h2>";
        }
    </script>
</body>
</html>
